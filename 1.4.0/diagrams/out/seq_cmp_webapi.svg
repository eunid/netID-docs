<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="434px" preserveAspectRatio="none" style="width:759px;height:434px;background:#FFFFFF;" version="1.1" viewBox="0 0 759 434" width="759px" zoomAndPan="magnify"><defs/><g><rect fill="#76B82A" height="29.1328" style="stroke:#76B82A;stroke-width:1.0;" width="10" x="529.5" y="152.3203"/><rect fill="#76B82A" height="29.1328" style="stroke:#76B82A;stroke-width:1.0;" width="10" x="671.5" y="298.9844"/><rect height="75.3984" style="stroke:#000000;stroke-width:1.5;fill:none;" width="599.5" x="10" y="114.0547"/><rect height="75.3984" style="stroke:#000000;stroke-width:1.5;fill:none;" width="743.5" x="10" y="260.7188"/><line style="stroke:#76B82A;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="56" x2="56" y1="39.7891" y2="395.25"/><line style="stroke:#76B82A;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="376.5" x2="376.5" y1="39.7891" y2="395.25"/><line style="stroke:#76B82A;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="534.5" x2="534.5" y1="39.7891" y2="395.25"/><line style="stroke:#76B82A;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="676.5" x2="676.5" y1="39.7891" y2="395.25"/><rect fill="#76B82A" height="33.7891" rx="2.5" ry="2.5" style="stroke:#76B82A;stroke-width:0.5;" width="73" x="20" y="5"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="59" x="27" y="27.7798">CMP JS</text><rect fill="#76B82A" height="33.7891" rx="2.5" ry="2.5" style="stroke:#76B82A;stroke-width:0.5;" width="73" x="20" y="394.25"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="59" x="27" y="417.0298">CMP JS</text><rect fill="#76B82A" height="33.7891" rx="2.5" ry="2.5" style="stroke:#76B82A;stroke-width:0.5;" width="166" x="293.5" y="5"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="152" x="300.5" y="27.7798">Permission Layer</text><rect fill="#76B82A" height="33.7891" rx="2.5" ry="2.5" style="stroke:#76B82A;stroke-width:0.5;" width="166" x="293.5" y="394.25"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="152" x="300.5" y="417.0298">Permission Layer</text><rect fill="#76B82A" height="33.7891" rx="2.5" ry="2.5" style="stroke:#76B82A;stroke-width:0.5;" width="130" x="469.5" y="5"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="116" x="476.5" y="27.7798">Read Service</text><rect fill="#76B82A" height="33.7891" rx="2.5" ry="2.5" style="stroke:#76B82A;stroke-width:0.5;" width="130" x="469.5" y="394.25"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="116" x="476.5" y="417.0298">Read Service</text><rect fill="#76B82A" height="33.7891" rx="2.5" ry="2.5" style="stroke:#76B82A;stroke-width:0.5;" width="134" x="609.5" y="5"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="120" x="616.5" y="27.7798">Write Service</text><rect fill="#76B82A" height="33.7891" rx="2.5" ry="2.5" style="stroke:#76B82A;stroke-width:0.5;" width="134" x="609.5" y="394.25"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="120" x="616.5" y="417.0298">Write Service</text><rect fill="#76B82A" height="29.1328" style="stroke:#76B82A;stroke-width:1.0;" width="10" x="529.5" y="152.3203"/><rect fill="#76B82A" height="29.1328" style="stroke:#76B82A;stroke-width:1.0;" width="10" x="671.5" y="298.9844"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="56.5" x2="98.5" y1="86.0547" y2="86.0547"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="98.5" x2="98.5" y1="86.0547" y2="99.0547"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="57.5" x2="98.5" y1="99.0547" y2="99.0547"/><polygon fill="#76B82A" points="67.5,95.0547,57.5,99.0547,67.5,103.0547,63.5,99.0547" style="stroke:#76B82A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="63.5" y="73.4224">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="98.5" y="65.856">Check local/cached status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="102.5" y="80.9888">Unknown user, no privacy status known</text><path d="M10,114.0547 L455,114.0547 L455,121.1875 L445,131.1875 L10,131.1875 L10,114.0547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="599.5" x="10" y="114.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="400" x="25" y="127.1216">Check Status (privacy settings, user authentication)</text><polygon fill="#76B82A" points="517.5,148.3203,527.5,152.3203,517.5,156.3203,521.5,152.3203" style="stroke:#76B82A;stroke-width:1.0;"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="56.5" x2="523.5" y1="152.3203" y2="152.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="63.5" y="147.2544">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="98.5" y="147.2544">try to retrieve privacy status for authenticated user</text><polygon fill="#76B82A" points="67.5,177.4531,57.5,181.4531,67.5,185.4531,63.5,181.4531" style="stroke:#76B82A;stroke-width:1.0;"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="61.5" x2="533.5" y1="181.4531" y2="181.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="73.5" y="176.3872">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="384" x="107.5" y="176.3872">response - OK, no privacy status present (tpid=null, tc=null)</text><line style="stroke:#76B82A;stroke-width:1.0;" x1="56.5" x2="98.5" y1="232.7188" y2="232.7188"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="98.5" x2="98.5" y1="232.7188" y2="245.7188"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="57.5" x2="98.5" y1="245.7188" y2="245.7188"/><polygon fill="#76B82A" points="67.5,241.7188,57.5,245.7188,67.5,249.7188,63.5,245.7188" style="stroke:#76B82A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="63.5" y="220.0864">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="98.5" y="212.52">Display CMP UI</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="102.5" y="227.6528">establish privacy status</text><path d="M10,260.7188 L453,260.7188 L453,267.8516 L443,277.8516 L10,277.8516 L10,260.7188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="743.5" x="10" y="260.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="398" x="25" y="273.7856">Permantenly store privacy status with user account</text><polygon fill="#76B82A" points="659.5,294.9844,669.5,298.9844,659.5,302.9844,663.5,298.9844" style="stroke:#76B82A;stroke-width:1.0;"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="56.5" x2="665.5" y1="298.9844" y2="298.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="63.5" y="293.9185">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="467" x="98.5" y="293.9185">store privacy status (TC String, netID Permission) via the WRITE SERVICE</text><polygon fill="#76B82A" points="67.5,324.1172,57.5,328.1172,67.5,332.1172,63.5,328.1172" style="stroke:#76B82A;stroke-width:1.0;"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="61.5" x2="675.5" y1="328.1172" y2="328.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="73.5" y="323.0513">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="108.5" y="323.0513">response: OK, TPID</text><line style="stroke:#76B82A;stroke-width:1.0;" x1="56.5" x2="98.5" y1="364.25" y2="364.25"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="98.5" x2="98.5" y1="364.25" y2="377.25"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="57.5" x2="98.5" y1="377.25" y2="377.25"/><polygon fill="#76B82A" points="67.5,373.25,57.5,377.25,67.5,381.25,63.5,377.25" style="stroke:#76B82A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="63.5" y="359.1841">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="98.5" y="359.1841">cache local status in netID Partner domain</text><!--MD5=[b018de5d535e38b51871ab3f3fc6e8a9]
@startuml
skinparam sequence {
ArrowColor #76b82a
ActorBorderColor #76b82a
ActorBackgroundColor #FFF
ActorFontColor #000
ActorFontName Arial
ActorFontSize 17

LifeLineBorderColor #76b82a
LifeLineBackgroundColor #76b82a

ParticipantBorderColor #76b82a
ParticipantBackgroundColor #76b82a
ParticipantFontName Arial
ParticipantFontSize 17
ParticipantFontColor #FFF

}

autonumber "<b>[00]"
participant  "CMP JS" as cmp
participant  "Permission Layer" as pl
participant  "Read Service" as rs
participant  "Write Service" as ws

cmp -> cmp :  Check local/cached status \n Unknown user, no privacy status known
group Check Status (privacy settings, user authentication)
cmp -> rs : try to retrieve privacy status for authenticated user
activate rs
rs -> cmp : response - OK, no privacy status present (tpid=null, tc=null)
deactivate rs
end
cmp -> cmp : Display CMP UI \n establish privacy status
Group Permantenly store privacy status with user account
cmp -> ws : store privacy status (TC String, netID Permission) via the WRITE SERVICE
activate ws
ws -> cmp : response: OK, TPID
deactivate ws
end
cmp -> cmp : cache local status in netID Partner domain
@enduml

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>