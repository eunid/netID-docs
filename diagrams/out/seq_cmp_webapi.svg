<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="446px" preserveAspectRatio="none" style="width:779px;height:446px;" version="1.1" viewBox="0 0 779 446" width="779px" zoomAndPan="magnify"><defs><filter height="300%" id="f206cb9zudj2x" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="29.1328" style="stroke:#76B82A;stroke-width:1.0;" width="10" x="535.5" y="156.3203"/><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="29.1328" style="stroke:#76B82A;stroke-width:1.0;" width="10" x="681.5" y="302.9844"/><rect fill="#FFFFFF" filter="url(#f206cb9zudj2x)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="607.5" x="10" y="118.0547"/><rect fill="#FFFFFF" filter="url(#f206cb9zudj2x)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="755.5" x="10" y="264.7188"/><line style="stroke:#76B82A;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="43.7891" y2="399.25"/><line style="stroke:#76B82A;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="378.5" x2="378.5" y1="43.7891" y2="399.25"/><line style="stroke:#76B82A;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="540.5" x2="540.5" y1="43.7891" y2="399.25"/><line style="stroke:#76B82A;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="686.5" x2="686.5" y1="43.7891" y2="399.25"/><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="33.7891" style="stroke:#76B82A;stroke-width:1.5;" width="73" x="20" y="5"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="59" x="27" y="27.7798">CMP JS</text><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="33.7891" style="stroke:#76B82A;stroke-width:1.5;" width="73" x="20" y="398.25"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="59" x="27" y="421.0298">CMP JS</text><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="33.7891" style="stroke:#76B82A;stroke-width:1.5;" width="166" x="293.5" y="5"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="152" x="300.5" y="27.7798">Permission Layer</text><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="33.7891" style="stroke:#76B82A;stroke-width:1.5;" width="166" x="293.5" y="398.25"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="152" x="300.5" y="421.0298">Permission Layer</text><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="33.7891" style="stroke:#76B82A;stroke-width:1.5;" width="130" x="473.5" y="5"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="116" x="480.5" y="27.7798">Read Service</text><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="33.7891" style="stroke:#76B82A;stroke-width:1.5;" width="130" x="473.5" y="398.25"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="116" x="480.5" y="421.0298">Read Service</text><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="33.7891" style="stroke:#76B82A;stroke-width:1.5;" width="134" x="617.5" y="5"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="120" x="624.5" y="27.7798">Write Service</text><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="33.7891" style="stroke:#76B82A;stroke-width:1.5;" width="134" x="617.5" y="398.25"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacing" textLength="120" x="624.5" y="421.0298">Write Service</text><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="29.1328" style="stroke:#76B82A;stroke-width:1.0;" width="10" x="535.5" y="156.3203"/><rect fill="#76B82A" filter="url(#f206cb9zudj2x)" height="29.1328" style="stroke:#76B82A;stroke-width:1.0;" width="10" x="681.5" y="302.9844"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="58.5" x2="100.5" y1="90.0547" y2="90.0547"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="100.5" x2="100.5" y1="90.0547" y2="103.0547"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="59.5" x2="100.5" y1="103.0547" y2="103.0547"/><polygon fill="#76B82A" points="69.5,99.0547,59.5,103.0547,69.5,107.0547,65.5,103.0547" style="stroke:#76B82A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="65.5" y="77.4224">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="100.5" y="69.856">Check local/cached status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="104.5" y="84.9888">Unknown user, no privacy status known</text><path d="M10,118.0547 L455,118.0547 L455,125.0547 L445,135.0547 L10,135.0547 L10,118.0547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="607.5" x="10" y="118.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="400" x="25" y="131.1216">Check Status (privacy settings, user authentication)</text><polygon fill="#76B82A" points="523.5,152.3203,533.5,156.3203,523.5,160.3203,527.5,156.3203" style="stroke:#76B82A;stroke-width:1.0;"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="58.5" x2="529.5" y1="156.3203" y2="156.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="65.5" y="151.2544">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="100.5" y="151.2544">try to retrieve privacy status for authenticated user</text><polygon fill="#76B82A" points="69.5,181.4531,59.5,185.4531,69.5,189.4531,65.5,185.4531" style="stroke:#76B82A;stroke-width:1.0;"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="63.5" x2="539.5" y1="185.4531" y2="185.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="75.5" y="180.3872">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="384" x="109.5" y="180.3872">response - OK, no privacy status present (tpid=null, tc=null)</text><line style="stroke:#76B82A;stroke-width:1.0;" x1="58.5" x2="100.5" y1="236.7188" y2="236.7188"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="100.5" x2="100.5" y1="236.7188" y2="249.7188"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="59.5" x2="100.5" y1="249.7188" y2="249.7188"/><polygon fill="#76B82A" points="69.5,245.7188,59.5,249.7188,69.5,253.7188,65.5,249.7188" style="stroke:#76B82A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="65.5" y="224.0864">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="100.5" y="216.52">Display CMP UI</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="104.5" y="231.6528">establish privacy status</text><path d="M10,264.7188 L453,264.7188 L453,271.7188 L443,281.7188 L10,281.7188 L10,264.7188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="755.5" x="10" y="264.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="398" x="25" y="277.7856">Permantenly store privacy status with user account</text><polygon fill="#76B82A" points="669.5,298.9844,679.5,302.9844,669.5,306.9844,673.5,302.9844" style="stroke:#76B82A;stroke-width:1.0;"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="58.5" x2="675.5" y1="302.9844" y2="302.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="65.5" y="297.9185">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="467" x="100.5" y="297.9185">store privacy status (TC String, netID Permission) via the WRITE SERVICE</text><polygon fill="#76B82A" points="69.5,328.1172,59.5,332.1172,69.5,336.1172,65.5,332.1172" style="stroke:#76B82A;stroke-width:1.0;"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="63.5" x2="685.5" y1="332.1172" y2="332.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="75.5" y="327.0513">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="110.5" y="327.0513">response: OK, TPID</text><line style="stroke:#76B82A;stroke-width:1.0;" x1="58.5" x2="100.5" y1="368.25" y2="368.25"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="100.5" x2="100.5" y1="368.25" y2="381.25"/><line style="stroke:#76B82A;stroke-width:1.0;" x1="59.5" x2="100.5" y1="381.25" y2="381.25"/><polygon fill="#76B82A" points="69.5,377.25,59.5,381.25,69.5,385.25,65.5,381.25" style="stroke:#76B82A;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="65.5" y="363.1841">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271" x="100.5" y="363.1841">cache local status in netID Partner domain</text><!--MD5=[2f304b0777423186eb842be4a50b75b8]
@startuml
skinparam sequence {
	ArrowColor #76b82a
	ActorBorderColor #76b82a
    ActorBackgroundColor #FFF
	ActorFontColor #000
    ActorFontName Arial
	ActorFontSize 17

	LifeLineBorderColor #76b82a
	LifeLineBackgroundColor #76b82a
	
	ParticipantBorderColor #76b82a
	ParticipantBackgroundColor #76b82a
	ParticipantFontName Arial
	ParticipantFontSize 17
	ParticipantFontColor #FFF

}

autonumber "<b>[00]"
participant  "CMP JS" as cmp
participant  "Permission Layer" as pl
participant  "Read Service" as rs
participant  "Write Service" as ws

cmp -> cmp :  Check local/cached status \n Unknown user, no privacy status known
 group Check Status (privacy settings, user authentication)
    cmp -> rs : try to retrieve privacy status for authenticated user
    activate rs
    rs -> cmp : response - OK, no privacy status present (tpid=null, tc=null)
    deactivate rs
    end
cmp -> cmp : Display CMP UI \n establish privacy status
Group Permantenly store privacy status with user account
cmp -> ws : store privacy status (TC String, netID Permission) via the WRITE SERVICE
activate ws
ws -> cmp : response: OK, TPID 
deactivate ws
end
cmp -> cmp : cache local status in netID Partner domain
@enduml

PlantUML version 1.2021.4beta3(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>