<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="490px" preserveAspectRatio="none" style="width:1054px;height:490px;" version="1.1" viewBox="0 0 1054 490" width="1054px" zoomAndPan="magnify"><defs><filter height="300%" id="f1b52wcphusyx3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="456.5" y="72.9219"/><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="456.5" y="244.7188"/><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="456.5" y="399.3828"/><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="762" y="155.3203"/><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="934" y="334.1172"/><rect fill="#FFFFFF" filter="url(#f1b52wcphusyx3)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="832" x="13" y="117.0547"/><rect fill="#FFFFFF" filter="url(#f1b52wcphusyx3)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="504" x="13" y="206.4531"/><rect fill="#FFFFFF" filter="url(#f1b52wcphusyx3)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="1030" x="13" y="295.8516"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="62" x2="62" y1="41.7891" y2="446.5156"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="461" x2="461" y1="41.7891" y2="446.5156"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="603" x2="603" y1="41.7891" y2="446.5156"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="767" x2="767" y1="41.7891" y2="446.5156"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="939" x2="939" y1="41.7891" y2="446.5156"/><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="75" x="23" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="61" x="30" y="25.7798">CMP JS</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="75" x="23" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="61" x="30" y="468.2954">CMP JS</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="87" x="416" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="73" x="423" y="25.7798">Browser</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="87" x="416" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="73" x="423" y="468.2954">Browser</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="168" x="517" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="154" x="524" y="25.7798">Permission Layer</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="168" x="517" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="154" x="524" y="468.2954">Permission Layer</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="132" x="699" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="118" x="706" y="25.7798">Read Service</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="132" x="699" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="118" x="706" y="468.2954">Read Service</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="184" x="845" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="170" x="852" y="25.7798">IdentWrite Service</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="184" x="845" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="170" x="852" y="468.2954">IdentWrite Service</text><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="456.5" y="72.9219"/><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="456.5" y="244.7188"/><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="456.5" y="399.3828"/><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="762" y="155.3203"/><rect fill="#76B82A" filter="url(#f1b52wcphusyx3)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="934" y="334.1172"/><polygon fill="#76B82A" points="444.5,68.9219,454.5,72.9219,444.5,76.9219,448.5,72.9219" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="62.5" x2="450.5" y1="72.9219" y2="72.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="69.5" y="67.856">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="104.5" y="67.856">Check local/cached status at netID Partner</text><polygon fill="#76B82A" points="73.5,98.0547,63.5,102.0547,73.5,106.0547,69.5,102.0547" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="67.5" x2="460.5" y1="102.0547" y2="102.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="79.5" y="96.9888">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="335" x="114.5" y="96.9888">response: unknown user, no privacy status present</text><path d="M13,117.0547 L456,117.0547 L456,124.0547 L446,134.0547 L13,134.0547 L13,117.0547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="832" x="13" y="117.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="398" x="28" y="130.1216">Check Status (privacy settings, user authentication)</text><polygon fill="#76B82A" points="750,151.3203,760,155.3203,750,159.3203,754,155.3203" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="62.5" x2="756" y1="155.3203" y2="155.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="69.5" y="150.2544">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="103.5" y="150.2544">try to retrieve privacy status for authenticated user</text><polygon fill="#76B82A" points="73.5,180.4531,63.5,184.4531,73.5,188.4531,69.5,184.4531" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="67.5" x2="766" y1="184.4531" y2="184.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="79.5" y="179.3872">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="412" x="114.5" y="179.3872">response - OK, CONSENT_REQUIRED, no privacy status present</text><path d="M13,206.4531 L459,206.4531 L459,213.4531 L449,223.4531 L13,223.4531 L13,206.4531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="504" x="13" y="206.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="401" x="28" y="219.52">Display CMP User Interface - establish privacy status</text><polygon fill="#76B82A" points="444.5,240.7188,454.5,244.7188,444.5,248.7188,448.5,244.7188" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="62.5" x2="450.5" y1="244.7188" y2="244.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="69.5" y="239.6528">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="104.5" y="239.6528">Display CMP UI - establish privacy status</text><polygon fill="#76B82A" points="73.5,269.8516,63.5,273.8516,73.5,277.8516,69.5,273.8516" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="67.5" x2="460.5" y1="273.8516" y2="273.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="79.5" y="268.7856">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="114.5" y="268.7856">response: User choices for privacy status</text><path d="M13,295.8516 L456,295.8516 L456,302.8516 L446,312.8516 L13,312.8516 L13,295.8516 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="1030" x="13" y="295.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="398" x="28" y="308.9185">Permantenly store privacy status with user account</text><polygon fill="#76B82A" points="922,330.1172,932,334.1172,922,338.1172,926,334.1172" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="62.5" x2="928" y1="334.1172" y2="334.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="69.5" y="329.0513">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="104.5" y="329.0513">store no privacy status via the WRITE SERVICE</text><polygon fill="#76B82A" points="73.5,359.25,63.5,363.25,73.5,367.25,69.5,363.25" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="67.5" x2="938" y1="363.25" y2="363.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="79.5" y="358.1841">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="114.5" y="358.1841">response: OK, TPID, privacy status</text><polygon fill="#76B82A" points="444.5,395.3828,454.5,399.3828,444.5,403.3828,448.5,399.3828" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="62.5" x2="450.5" y1="399.3828" y2="399.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="69.5" y="394.3169">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="104.5" y="394.3169">cache local status in netID Partner domain</text><polygon fill="#76B82A" points="73.5,424.5156,63.5,428.5156,73.5,432.5156,69.5,428.5156" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="67.5" x2="460.5" y1="428.5156" y2="428.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="79.5" y="423.4497">[10]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="114.5" y="423.4497">response</text><!--MD5=[be24f1764bc156b3067f6a0ac2dcffe8]
@startuml
skinparam sequence {
	ArrowColor #76b82a
	ActorBorderColor #76b82a
    ActorBackgroundColor #FFF
	ActorFontColor #000
    ActorFontName Arial
	ActorFontSize 17

	LifeLineBorderColor #76b82a
	LifeLineBackgroundColor #76b82a
	
	ParticipantBorderColor #76b82a
	ParticipantBackgroundColor #76b82a
	ParticipantFontName Arial
	ParticipantFontSize 17
	ParticipantFontColor #FFF

}

autonumber "<b>[00]"
participant  "CMP JS" as cmp
participant  "Browser" as br
participant  "Permission Layer" as pl
participant  "Read Service" as rs
participant  "IdentWrite Service" as ws

cmp -> br : Check local/cached status at netID Partner
activate br
br -> cmp : response: unknown user, no privacy status present
deactivate br
group Check Status (privacy settings, user authentication)
    cmp -> rs : try to retrieve privacy status for authenticated user
    activate rs
    rs -> cmp : response - OK, CONSENT_REQUIRED, no privacy status present
    deactivate rs
    end
group Display CMP User Interface - establish privacy status 
    cmp -> br : Display CMP UI - establish privacy status
    activate br
    br -> cmp : response: User choices for privacy status
    deactivate br
    end
Group Permantenly store privacy status with user account
cmp -> ws : store no privacy status via the WRITE SERVICE
activate ws
ws -> cmp : response: OK, TPID, privacy status 
deactivate ws
end
cmp -> br : cache local status in netID Partner domain
activate br
br -> cmp : response
deactivate br
@enduml

PlantUML version 1.2020.08beta6(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14.0.1+7
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>