<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="490px" preserveAspectRatio="none" style="width:1040px;height:490px;" version="1.1" viewBox="0 0 1040 490" width="1040px" zoomAndPan="magnify"><defs><filter height="300%" id="f1taspvlidbw7d" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="450.5" y="72.9219"/><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="450.5" y="244.7188"/><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="450.5" y="399.3828"/><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="753" y="155.3203"/><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="922" y="334.1172"/><rect fill="#FFFFFF" filter="url(#f1taspvlidbw7d)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="822" x="13" y="117.0547"/><rect fill="#FFFFFF" filter="url(#f1taspvlidbw7d)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="498" x="13" y="206.4531"/><rect fill="#FFFFFF" filter="url(#f1taspvlidbw7d)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="1016" x="13" y="295.8516"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="61" x2="61" y1="41.7891" y2="446.5156"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="455" x2="455" y1="41.7891" y2="446.5156"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="596" x2="596" y1="41.7891" y2="446.5156"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="758" x2="758" y1="41.7891" y2="446.5156"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="927" x2="927" y1="41.7891" y2="446.5156"/><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="73" x="23" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="59" x="30" y="25.7798">CMP JS</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="73" x="23" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="59" x="30" y="468.2954">CMP JS</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="87" x="410" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="73" x="417" y="25.7798">Browser</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="87" x="410" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="73" x="417" y="468.2954">Browser</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="166" x="511" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="152" x="518" y="25.7798">Permission Layer</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="166" x="511" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="152" x="518" y="468.2954">Permission Layer</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="130" x="691" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="116" x="698" y="25.7798">Read Service</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="130" x="691" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="116" x="698" y="468.2954">Read Service</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="180" x="835" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="166" x="842" y="25.7798">IdentWrite Service</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="180" x="835" y="445.5156"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="166" x="842" y="468.2954">IdentWrite Service</text><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="450.5" y="72.9219"/><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="450.5" y="244.7188"/><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="450.5" y="399.3828"/><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="753" y="155.3203"/><rect fill="#76B82A" filter="url(#f1taspvlidbw7d)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="922" y="334.1172"/><polygon fill="#76B82A" points="438.5,68.9219,448.5,72.9219,438.5,76.9219,442.5,72.9219" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="444.5" y1="72.9219" y2="72.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="68.5" y="67.856">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="103.5" y="67.856">Check local/cached status at netID Partner</text><polygon fill="#76B82A" points="72.5,98.0547,62.5,102.0547,72.5,106.0547,68.5,102.0547" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="454.5" y1="102.0547" y2="102.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="78.5" y="96.9888">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="330" x="113.5" y="96.9888">response: unknown user, no privacy status present</text><path d="M13,117.0547 L458,117.0547 L458,124.0547 L448,134.0547 L13,134.0547 L13,117.0547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="822" x="13" y="117.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="400" x="28" y="130.1216">Check Status (privacy settings, user authentication)</text><polygon fill="#76B82A" points="741,151.3203,751,155.3203,741,159.3203,745,155.3203" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="747" y1="155.3203" y2="155.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="68.5" y="150.2544">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="331" x="102.5" y="150.2544">try to retrieve privacy status for authenticated user</text><polygon fill="#76B82A" points="72.5,180.4531,62.5,184.4531,72.5,188.4531,68.5,184.4531" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="757" y1="184.4531" y2="184.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="78.5" y="179.3872">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="404" x="113.5" y="179.3872">response - OK, CONSENT_REQUIRED, no privacy status present</text><path d="M13,206.4531 L461,206.4531 L461,213.4531 L451,223.4531 L13,223.4531 L13,206.4531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="498" x="13" y="206.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="403" x="28" y="219.52">Display CMP User Interface - establish privacy status</text><polygon fill="#76B82A" points="438.5,240.7188,448.5,244.7188,438.5,248.7188,442.5,244.7188" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="444.5" y1="244.7188" y2="244.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="68.5" y="239.6528">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="103.5" y="239.6528">Display CMP UI - establish privacy status</text><polygon fill="#76B82A" points="72.5,269.8516,62.5,273.8516,72.5,277.8516,68.5,273.8516" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="454.5" y1="273.8516" y2="273.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="78.5" y="268.7856">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="113.5" y="268.7856">response: User choices for privacy status</text><path d="M13,295.8516 L456,295.8516 L456,302.8516 L446,312.8516 L13,312.8516 L13,295.8516 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="1016" x="13" y="295.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="398" x="28" y="308.9185">Permantenly store privacy status with user account</text><polygon fill="#76B82A" points="910,330.1172,920,334.1172,910,338.1172,914,334.1172" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="916" y1="334.1172" y2="334.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="68.5" y="329.0513">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="441" x="103.5" y="329.0513">store privacy status via the WRITE SERVICE (TC String, Identification)</text><polygon fill="#76B82A" points="72.5,359.25,62.5,363.25,72.5,367.25,68.5,363.25" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="926" y1="363.25" y2="363.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="78.5" y="358.1841">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="113.5" y="358.1841">response: OK, TPID, privacy status</text><polygon fill="#76B82A" points="438.5,395.3828,448.5,399.3828,438.5,403.3828,442.5,399.3828" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="444.5" y1="399.3828" y2="399.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="68.5" y="394.3169">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="103.5" y="394.3169">cache local status in netID Partner domain</text><polygon fill="#76B82A" points="72.5,424.5156,62.5,428.5156,72.5,432.5156,68.5,428.5156" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="454.5" y1="428.5156" y2="428.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="78.5" y="423.4497">[10]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="113.5" y="423.4497">response</text><!--MD5=[cee14f45ced499cb46d560fc0dc8a48b]
@startuml
skinparam sequence {
	ArrowColor #76b82a
	ActorBorderColor #76b82a
    ActorBackgroundColor #FFF
	ActorFontColor #000
    ActorFontName Arial
	ActorFontSize 17

	LifeLineBorderColor #76b82a
	LifeLineBackgroundColor #76b82a
	
	ParticipantBorderColor #76b82a
	ParticipantBackgroundColor #76b82a
	ParticipantFontName Arial
	ParticipantFontSize 17
	ParticipantFontColor #FFF

}

autonumber "<b>[00]"
participant  "CMP JS" as cmp
participant  "Browser" as br
participant  "Permission Layer" as pl
participant  "Read Service" as rs
participant  "IdentWrite Service" as ws

cmp -> br : Check local/cached status at netID Partner
activate br
br -> cmp : response: unknown user, no privacy status present
deactivate br
group Check Status (privacy settings, user authentication)
    cmp -> rs : try to retrieve privacy status for authenticated user
    activate rs
    rs -> cmp : response - OK, CONSENT_REQUIRED, no privacy status present
    deactivate rs
    end
group Display CMP User Interface - establish privacy status 
    cmp -> br : Display CMP UI - establish privacy status
    activate br
    br -> cmp : response: User choices for privacy status
    deactivate br
    end
Group Permantenly store privacy status with user account
cmp -> ws : store privacy status via the WRITE SERVICE (TC String, Identification)
activate ws
ws -> cmp : response: OK, TPID, privacy status 
deactivate ws
end
cmp -> br : cache local status in netID Partner domain
activate br
br -> cmp : response
deactivate br
@enduml

PlantUML version 1.2020.09(Sun May 10 10:51:06 UTC 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14.0.1+7
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>